## 08장. 데이터베이스 설계

### 34강. 데이터베이스 설계

데이터베이스를 설계한다는 것은 데이터베이스의 스키마 내에 테이블, 인덱스, 뷰 등의 데이터베이스 객체를 정의하는 것을 말한다.<br/>
데이터베이스 설계의 주된 내용은 테이블의 이름이나 열, 자료형을 결정짓는 것으로 테이블간의 관계를 생각하면서 테이블을 정의하고 작성하게 된다.

- 문자열의 자료형

문자열의 자료형에는 고정길이와 가변길이가 있는데 어느 쪽으로 지정할 것인지는 저장할 데이터를 고려해 결정한다.<br/>
데이터베이스의 열에 저장할 수 있는 크기는 의외로 작다. VARCHAR 형은 최대 수천 바이트로 조금 큰 파일을 저장할 경우 쉽게 용량을 넘겨버린다.<br/>

이러한 경우에 LOB(Large Object)형을 사용하는 것을 권장한다.<br/>
단, 인덱스를 지정할 수 없다는 제약이 존재한다.

<br/>

### 35강. 정규화

정규화란 데이터베이스의 테이블을 규정된 올바른 형태로 개선해나가는 것으로 데이터베이스 설계 단계에서 행해진다.<br/>
경우에 따라서는 기존 시스템을 재검토할 때 정규화하는 경우도 있다.

- 제1 정규화

관계형 데이터베이스의 테이블에는 하나의 셀에 하나의 값만 저장할 수 있다는 제약이 있다.<br/>
이로 인해 특정 셀에 여러 개의 정보를 담고 있다면 분리해야 한다.<br/>
이렇게 하나의 셀에 하나의 값만 저장할 수 있도록 하고, 반복되는 부분을 행 방향으로 늘려나가는 것이 제1 정규화의 1단계이다.

제1 정규화에서는 중복을 제거하는 테이블의 분할도 이루어지는데 이때 동일한 값을 가지는 행이 여러 개 존재하지 않도록 나누는 것을 의미한다.

- 제2 정규화

키 값을 이용해 데이터를 특정지을 수 있는 것을 찾아내서 테이블을 분할하는 것


- **정규화의 목적**

정규화에서는 중복하거나 반복되는 부분을 찾아서 테이블을 분할하고 기본키를 작성해 사용하는 것을 기본 개념으로 삼는다.<br/>
이는 '하나의 데이터는 한 곳에 있어야 한다'는 규칙에 근거하게 된다.<br/>
이렇게 될 경우 하나의 데이터가 반드시 한 곳에만 저장되기 때문에 데이터를 변경하더라도 한 곳만 변경하는 것으로 끝낼 수 있게 된다.<br/>
반면 정규화되지 않은 경우라면 여기저기 중복해서 저장된 데이터를 검색하고 일일이 변경해야 하는 번거로움이 생기게 되고 인덱스가 지정된 열의 데이터가 변경되는 경우에는 인덱스도 재구축해야 한다.

<br/>

### 36강. 트랜잭션

데이터베이스는 트랜잭션이라는 기능을 제공한다.<br/>
트랜잭션은 SQL 명령을 실행하는 중에 문제가 발생하여도 안정적으로 데이터를 유지하는. 즉, 데이터의 일관성을 유지하게 된다.

- 롤백과 커밋

주로 데이터의 변경이 발생하는 경우에 사용하는데 만약 실행 도중에 에러가 발생해도 트랜잭션은 **롤백**을 해서 종료를 시킬 수 있다.<br/>
아무런 에러가 발생하지 않는다면 **커밋**하여 변경사항을 적용하고 트랜잭션을 종료시킨다.

트랜잭션을 시작할 때 사용하는 명령: START TRANSACTION(MySQL) / BEGIN TRANSACTION (SQL Server, PostgreSQL)

