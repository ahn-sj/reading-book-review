## 4장. 데이터의 추가, 삭제, 갱신

### 16강. 행 추가하기 - INSERT

RDBMS에서는 INSERT 명령으로 테이블의 행 단위로 데이터를 추가한다.
```sql
INSERT INTO 테이블명 VALUES(값1, 값2, ...)
```
```sql
INSERT INTO sample VALUES(1, 'ABC', '2014-01-25');
```

위의 경우에는 열에 매칭되는 데이터를 전부 넣어야하지만 만약, 특정 열의 데이터만 저장하고 싶은 경우에는 다음과 같다.
```sql
INSERT INTO 테이블명(열1, 열2, ...) VALUES(값1, 값2, ...)
```
```sql
INSERT INTO sample(no, a) VALUES(1, 'AAA');
```

만약 NOT NULL 제약조건이 걸린 컬럼의 경우에는 에러가 발생하기 때문에 주의할 필요가 있다.

- DEFAULT
DESC 명령으로 열 구성을 살펴보면 Default는라는 항목이 존재한다.<br/>
```sql
DESC sample;
```

이때 Default는 명시적으로 값을 지정하지 않았을 경우 사용하는 초기값을 의미한다.<br/>
또한, 명시적 또는 암묵적으로 디폴트 값을 저장할 수 있는데 `'d'` 컬럼에 DEFAULT 값이 `0`으로 설정되어 있다고 가정해보자.


```sql
-- DEFAULT 값 명시적 지정
INSERT INTO sample(no, d) VALUES(1, DEFAULT);

-- DEFAULT 값 암묵적 저장
INSERT INTO sample(no) VALUES(2);
```

두 문장을 실행했을 때 테이블에는 아래와 같은 형태로 데이터가 저장되게 된다.

|no|d|
|--|--|
|1|0|
|2|0|

<br/>

### 17강. 삭제하기 - DELETE

RDBMS에서 데이터를 삭제할 경우에는 행 단위로 DELETE 명령을 수행한다.

```sql
DELETE FROM 테이블명 WHERE 조건식
```

만약 WHERE절을 지정하지 않을 경우에는 모든 행을 대상으로 동작하기 때문에 테이블에 저장된 모든 데이터가 삭제된다.

<br/>

### 18강. 데이터 갱신하기 - UPDATE

```sql
UPDATE 테이블명 SET 열1 = 값1, 열2 = 값2, ... WHERE 조건식
```

UPDATE는 DELETE와 달리 특정 셀 단위로 데이터를 갱신할 수 있다. (행 단위가 아닌 셀 변경이 가능하다는 의미)<br/>
WHERE 절에 조건을 지정하면 그에 일치하는 행을 갱신할 수 있고, 만약 생략한다면 DELETE와 마찬가지로 테이블에 존재하는 모든 행에 반영이 되게 된다.<br/>
또한, WHERE의 조건이 일치하는 복수 개인 행에 대해서도 갱신 대상이 되어 여러 개의 행이 변경될 수 있다.

UPDATE 명령에서는 SET구를 사용하여 갱신할 열과 값을 지정한다.
```sql
SET 열 = 값
```
이때, =은 비교 연산자가 아닌 값을 대입하는 대입 연산자이다.

갱신해야 할 열과 값이 복수 개인 경우에는 '열 = 값'을 콤마(,)로 구분하여 리스트 형식으로 지정할 수 있다.

<br/>

### 19강. 물리삭제와 논리삭제


데이터베이스에서 데이터를 삭제하는 방법은 용도에 따라 크게 '물리 삭제(Hard Delete)'와 '논리 삭제(Soft Delete)'로 나뉘게 된다.<br/>
물리삭제와 논리삭제는 전용 SQL명령이 따로 존재하는 것이 아닌 시스템 설계적인 관점의 이야기이다.

- 물리삭제
물리삭제는 SQL의 DELETE 명령을 사용해 직접 데이터를 삭제하자는 방법을 의미한다.<br/>

- 논리삭제
논리삭제는 테이블에 '삭제플래그'와 같은 열을 미리 생성해두고 삭제 작업시 실제 행을 DELETE하는 것이 아닌 UPDATE로 '삭제플래그'의 값을 유효하게 갱신하는 방법을 의미한다.<br/>
즉, 실제 테이블안에 데이터는 남아있지만 참조할 떄에는 '삭제플래그'가 삭제로 설정된 행은 SELECT 명령에서 제외되도록하여 결과적으로 해당 행이 '삭제된 것처럼' 보이게 된다.

이러한 논리삭제의 장점으로는 데이터를 삭제하지 않기 때문에 삭제되기 전의 상태로 되돌릴 수 있다는 것이고,<br/>
단점으로는 삭제해도 데이터베이스의 저장공간이 늘어나지 않는다는 것과 데이터베이스의 크기가 증가함에 따라 검색속도가 떨어진다는 점이 있다.<br/>
뿐만 아니라, 애플리케이션 측면에서 삭제임에도 불구하고 UPDATE 명령을 실행하므로 혼란을 야기하기도 한다.

- 삭제 방법 선택하기 (물리삭제 vs 논리삭제)
어떤 방법으로 삭제할 것인지는 시스템의 특성이나 테이블에 저장되어 있는 데이터의 특성에 따라 다르기 때문에 상황에 맞게 선택해야 한다.<br/>
이렇게 물리삭제와 논리삭제는 어느 쪽이 좋은지 따지기보다 상황과 용도에 따라 선택하는 것이 중요하다.
